<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>Prius Obstacle Avoidance - VisualStates</title>

    
  

  <link rel="shortcut icon" href="http://localhost:4000/docs/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="http://localhost:4000/docs/assets/css/just-the-docs.css">

  

  
    <script type="text/javascript" src="http://localhost:4000/docs/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="http://localhost:4000/docs/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Prius Obstacle Avoidance | VisualStates</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Prius Obstacle Avoidance" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Robot Programming Tool" />
<meta property="og:description" content="Robot Programming Tool" />
<link rel="canonical" href="http://localhost:4000/docs/docs/examples/prius_obstacle_avoidance/" />
<meta property="og:url" content="http://localhost:4000/docs/docs/examples/prius_obstacle_avoidance/" />
<meta property="og:site_name" content="VisualStates" />
<script type="application/ld+json">
{"description":"Robot Programming Tool","@type":"WebPage","url":"http://localhost:4000/docs/docs/examples/prius_obstacle_avoidance/","headline":"Prius Obstacle Avoidance","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

  <div class="page-wrap">
    <div class="side-bar">
      <a href="http://localhost:4000/docs" class="site-title fs-6 lh-tight">VisualStates</a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    
    
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/" class="navigation-list-link">Home</a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/docs/user-manual/user-manual/" class="navigation-list-link">User Manual</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/user-manual/intro/" class="navigation-list-link">Introduction</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/user-manual/import/" class="navigation-list-link">Import Functionality</a>
                      
                    </li>
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/user-manual/namespace/" class="navigation-list-link">Namespace Functionality</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/docs/tutorials" class="navigation-list-link">Tutorials</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a href="http://localhost:4000/docs/docs/examples" class="navigation-list-link">Examples</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/kobuki-bumpAndGo/" class="navigation-list-link">Kobuki Bump And Go</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/kobuki-obstacle-avoidance/" class="navigation-list-link">Kobuki Obstacle Avoidance</a>
                      
                    </li>
                  
                
                  
                
                  
                    <li class="navigation-list-item  active">
                      
                      <a href="http://localhost:4000/docs/docs/examples/prius_obstacle_avoidance/" class="navigation-list-link active">Prius Obstacle Avoidance</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/prius_crossing/" class="navigation-list-link">Prius Crossing</a>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/prius_overtake/" class="navigation-list-link">Prius Overtake</a>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/prius_in_the_city/" class="navigation-list-link">Prius in the City</a>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/robot_arm/" class="navigation-list-link">Robotic Arm</a>
                      
                    </li>
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  </ul>
</nav>

      </div>
      <footer role="contentinfo" class="site-footer">
        <p class="text-small text-grey-dk-000 mb-0">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="page-header">
        <div class="main-content">
          
          <div class="search js-search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search VisualStates" aria-label="Search VisualStates" autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
          
          
            <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
              
                <li class="d-inline-block my-0"><a href="//github.com/jderobot/VisualStates">VisualStates on GitHub</a></li>
              
            </ul>
          
        </div>
      </div>
      <div class="main-content">
        
          
            <nav class="breadcrumb-nav">
              <ol class="breadcrumb-nav-list">
                
                  <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/docs/examples">Examples</a></li>
                
                <li class="breadcrumb-nav-list-item"><span>Prius Obstacle Avoidance</span></li>
              </ol>
            </nav>
          
        
        <div id="main-content" class="page-content" role="main">
          <h1 class="no_toc" id="prius-obstacle-avoidance">Prius Obstacle Avoidance</h1>

<p>The following example in VisualStates demonstrates the Prius Toyota Car Obstacle Avoidance behavior in Gazebo 8 developed through ROS Kinetic. The following examples illustrates the Import Functionality present in VisualStates. The prebuilt behavior of ObstacleAvoidance for TurtleBot is imported and updated to be used for Prius Obstacle Avoidance behavior. Also, the child-states developed in PriusSpawn behavior are used to drive the car.</p>

<h2 id="steps-to-run-the-example">Steps to run the example</h2>
<h3 id="dependencies">Dependencies</h3>
<ul>
  <li>We assume that you already installed ROS Kinetic and Gazebo 8 on Ubuntu 16.04 system to be able to test the behaviors. However, if you did not install yet, you can do so following these pages: <a href="http://wiki.ros.org/kinetic/Installation/Ubuntu">http://wiki.ros.org/kinetic/Installation/Ubuntu</a>  <a href="http://gazebosim.org/tutorials?tut=install_ubuntu&amp;cat=install">http://gazebosim.org/tutorials?tut=install_ubuntu&amp;cat=install</a></li>
  <li>We assume you have created a ROS Workspace, cloned the latest release of VisualStates, compiled and sourced the workspace.</li>
</ul>

<h3 id="ros-package-generation">ROS Package Generation</h3>
<ol>
  <li>Copy Prius messages, world, description packages from <a href="/prius">Prius</a> and paste it in your ROS Workshop. Also copy the pre-developed VisualStates XML File. In our case lets name it catkin_ws.
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>catkin_ws
<span class="nb">cd </span>src
cp <span class="nt">-r</span> &lt;path_to_visualstates_examples&gt;/prius/<span class="k">*</span> <span class="nb">.</span>
cp <span class="nt">-r</span> &lt;path_to_visualstates_examples&gt;/priusObstacleAvoidance/<span class="k">*</span> <span class="nb">.</span>
<span class="nb">cd</span> ..
</code></pre></div>    </div>
  </li>
  <li>Compile the package and source it.
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>catkin_make
<span class="nb">source </span>devel/setup.bash
</code></pre></div>    </div>
  </li>
  <li>Generate the ROS Package of the behavior using the <strong>visualstates</strong>.
```bash
rosrun visualstates main.py <path_to_ros_workspace>/src/prius_obstacle_avoidance/prius_obstacle_avoidance.xml</path_to_ros_workspace></li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Generate ROS package using `Actions -&gt; Generate Python` menu.

Recompile the ROS Workspace and you would find a new package prius_obstacle_avoidance in the package list. After compiling source the workspace again.

```bash
source devel/setup.bash
</code></pre></div></div>
<p>Add the CloverLeaf model to Gazebo models by adding the following line to your environment variables.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">GAZEBO_MODEL_PATH</span><span class="o">=</span>&lt;path_to_PriusSpawnExample&gt;/prius_gazebo/models:<span class="nv">$GAZEBO_MODEL_PATH</span>
</code></pre></div></div>
<p>Start the Gazebo simulator and spawn Toyota Prius Car with Prius world, using the toyota prius world launch file</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>roslaunch prius_gazebo prius_obstacle_avoid.launch
</code></pre></div></div>
<p>Run our generated ROS Node and visualize Toyota Prius Car Obstacle Avoidance Behavior.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosrun prius_obstacle_avoidance prius_obstacle_avoidance.py <span class="nt">--displaygui</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></div>



          
        </div>
      </div>
    </div>
  </div>

</body>
</html>
