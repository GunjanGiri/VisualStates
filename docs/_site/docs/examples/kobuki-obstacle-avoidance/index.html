<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>Kobuki Obstacle Avoidance - VisualStates</title>

    
  

  <link rel="shortcut icon" href="http://localhost:4000/docs/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="http://localhost:4000/docs/assets/css/just-the-docs.css">

  

  
    <script type="text/javascript" src="http://localhost:4000/docs/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="http://localhost:4000/docs/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Kobuki Obstacle Avoidance | VisualStates</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Kobuki Obstacle Avoidance" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Robot Programming Tool" />
<meta property="og:description" content="Robot Programming Tool" />
<link rel="canonical" href="http://localhost:4000/docs/docs/examples/kobuki-obstacle-avoidance/" />
<meta property="og:url" content="http://localhost:4000/docs/docs/examples/kobuki-obstacle-avoidance/" />
<meta property="og:site_name" content="VisualStates" />
<script type="application/ld+json">
{"description":"Robot Programming Tool","@type":"WebPage","url":"http://localhost:4000/docs/docs/examples/kobuki-obstacle-avoidance/","headline":"Kobuki Obstacle Avoidance","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

  <div class="page-wrap">
    <div class="side-bar">
      <a href="http://localhost:4000/docs" class="site-title fs-6 lh-tight">VisualStates</a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    
    
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/" class="navigation-list-link">Home</a>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/docs/user-manual/user-manual/" class="navigation-list-link">User Manual</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/user-manual/intro/" class="navigation-list-link">Introduction</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/user-manual/import/" class="navigation-list-link">Import Functionality</a>
                      
                    </li>
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/user-manual/namespace/" class="navigation-list-link">Namespace Functionality</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/docs/docs/tutorials" class="navigation-list-link">Tutorials</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </ul>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a href="http://localhost:4000/docs/docs/examples" class="navigation-list-link">Examples</a>
            
              
              <ul class="navigation-list-child-list ">
                
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/kobuki-bumpAndGo/" class="navigation-list-link">Kobuki Bump And Go</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item  active">
                      
                      <a href="http://localhost:4000/docs/docs/examples/kobuki-obstacle-avoidance/" class="navigation-list-link active">Kobuki Obstacle Avoidance</a>
                      
                    </li>
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/prius_obstacle_avoidance/" class="navigation-list-link">Prius Obstacle Avoidance</a>
                      
                    </li>
                  
                
                  
                
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/prius_crossing/" class="navigation-list-link">Prius Crossing</a>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/prius_overtake/" class="navigation-list-link">Prius Overtake</a>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/prius_in_the_city/" class="navigation-list-link">Prius in the City</a>
                      
                    </li>
                  
                
                  
                    <li class="navigation-list-item ">
                      
                      <a href="http://localhost:4000/docs/docs/examples/robot_arm/" class="navigation-list-link">Robotic Arm</a>
                      
                    </li>
                  
                
              </ul>
            
          </li>
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
  </ul>
</nav>

      </div>
      <footer role="contentinfo" class="site-footer">
        <p class="text-small text-grey-dk-000 mb-0">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="page-header">
        <div class="main-content">
          
          <div class="search js-search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search VisualStates" aria-label="Search VisualStates" autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
          
          
            <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
              
                <li class="d-inline-block my-0"><a href="//github.com/jderobot/VisualStates">VisualStates on GitHub</a></li>
              
            </ul>
          
        </div>
      </div>
      <div class="main-content">
        
          
            <nav class="breadcrumb-nav">
              <ol class="breadcrumb-nav-list">
                
                  <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/docs/examples">Examples</a></li>
                
                <li class="breadcrumb-nav-list-item"><span>Kobuki Obstacle Avoidance</span></li>
              </ol>
            </nav>
          
        
        <div id="main-content" class="page-content" role="main">
          <h1 class="no_toc" id="kobuki-obstacle-avoidance">Kobuki Obstacle Avoidance</h1>

<p>This behaviour demonstrates the Obstacle Avoidance behavior developed for Kobuki-Turtlebot robot developed using ROS Kinetic and simulated in Gazebo9. The behavior consists of 2 states -&gt; <code class="highlighter-rouge">Move</code> and <code class="highlighter-rouge">Avoid</code> and transitions based on the laser sensor data to detect and avoid obstacles like wall. Here’s a small demo video of the behaviour:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/o-SAe_qwOMc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" align="middle" allowfullscreen=""></iframe>

<h2 id="steps-to-run-the-example">Steps to run the example</h2>
<h4 id="dependencies">Dependencies</h4>
<p>We assume that you already installed ROS and Gazebo on Ubuntu 16.04 system to be able to test the behaviors. However, if you did not install yet, you can do so following these pages: <a href="http://wiki.ros.org/kinetic/Installation/Ubuntu">http://wiki.ros.org/kinetic/Installation/Ubuntu</a>  <a href="http://gazebosim.org/tutorials?tut=install_ubuntu&amp;cat=install">http://gazebosim.org/tutorials?tut=install_ubuntu&amp;cat=install</a></p>

<p>We also need worlds from JdeRobot repositories. To be able to install jderobot gazebo assets. Please follow the steps here: https://jderobot.org/Installation
We add required commands here for completeness</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s1">'cat&lt;&lt;EOF&gt;/etc/apt/sources.list.d/jderobot.list
# for ubuntu 16.04 LTS (64 bit)
deb [arch=amd64] http://jderobot.org/apt xenial main
EOF'</span>
<span class="nb">sudo </span>apt-key adv <span class="nt">--keyserver</span> keyserver.ubuntu.com <span class="nt">--recv</span> 24E521A4
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt install jderobot-gazebo-assets
</code></pre></div></div>
<p>To be able to complete the JdeRobot Gazebo assets installation we need to source the JdeRobot installation script</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /opt/jderobot/share/jderobot/gazebo/gazebo-assets-setup.sh
</code></pre></div></div>
<p><strong><em>This is important that you need to run your gazebo simulation on the console that you have sourced your JdeRobot installation otherwise Gazebo simulator cannot find models and worlds of JdeRobot</em></strong></p>

<h4 id="ros-package-generation">ROS package generation</h4>
<p>First we must generate the ros package of the behavior using the <strong>visualstates</strong>.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosrun visualstates main.py &lt;path_to_visualstates_examples&gt;/kobuki_obstacle_avoidance/kobuki_obstacle_avoidance.xml
</code></pre></div></div>
<p>Using <code class="highlighter-rouge">File -&gt; Save As</code> save the behavior in an empty directory that is also in an active <code class="highlighter-rouge">catkin_workspace</code>. Since code generation will create required files to make the directory a ROS package, you should have different directory for every new behavior. Now, we can generate ROS package using <code class="highlighter-rouge">Actions -&gt; Generate Python</code> menu.</p>

<p>Navigate to your <code class="highlighter-rouge">catkin_workspace</code> and run <code class="highlighter-rouge">catkin_make</code>. As an output of <code class="highlighter-rouge">catkin_make</code> you will see the <code class="highlighter-rouge">kobuki_obstacle_avoidance</code> listed as a ROS package.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>catkin_ws
catkin_make
</code></pre></div></div>
<p>Start the roscore</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>roscore
</code></pre></div></div>
<p>Start the Gazebo simulator, using the gazebo_ros package</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosrun gazebo_ros gazebo kobuki-simple-ros.world
</code></pre></div></div>
<p>Run our generated package</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rosrun kobuki_obstacle_avoidance kobuki_obstacle_avoidance.py <span class="nt">--displaygui</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></div>



          
        </div>
      </div>
    </div>
  </div>

</body>
</html>
